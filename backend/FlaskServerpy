from flask import Flask, request, jsonify
from QuestionGenerator import WebsiteQuestionGenerator
import os
from dotenv import load_dotenv

generator = WebsiteQuestionGenerator(os.getenv("NIM_KEY"))
app = Flask(__name__)

@app.route('/api/questions', methods = ['GET'])
def send_survey_questions():

    url = request.args.get('url')
    if url is not None:
        answer = generator.get_questions_for_site(url)
        return jsonify(answer)

    return jsonify(response='No URL passed')
    

if __name__ == '__main__':
    app.run(debug=True)